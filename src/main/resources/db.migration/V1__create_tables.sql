CREATE TABLE airlines (
airline_id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
name VARCHAR(255),
country VARCHAR(255)
);

CREATE TABLE airports (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
code VARCHAR(255),
name VARCHAR(255),
city VARCHAR(255),
country VARCHAR(255)
);

CREATE TABLE flights (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
flight_number VARCHAR(255),
status VARCHAR(255),
departure_airport_code VARCHAR(255),
arrival_airport_code VARCHAR(255),
airline_id BIGINT,
CONSTRAINT FK_airline FOREIGN KEY (airline_id) REFERENCES airlines(airline_id)
);

CREATE TABLE flights_airports (
flight_id BIGINT NOT NULL,
airports_id BIGINT NOT NULL,
CONSTRAINT FK_flight FOREIGN KEY (flight_id) REFERENCES flights(id),
CONSTRAINT FK_airport FOREIGN KEY (airports_id) REFERENCES airports(id)
);

CREATE TABLE permissions (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
name VARCHAR(255)
);

CREATE TABLE users (
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
username VARCHAR(255) NOT NULL UNIQUE,
email VARCHAR(255) NOT NULL UNIQUE,
password VARCHAR(255) NOT NULL
);

CREATE TABLE user_permissions (
user_id BIGINT NOT NULL,
permission_id BIGINT NOT NULL,
CONSTRAINT FK_user FOREIGN KEY (user_id) REFERENCES users(id),
CONSTRAINT FK_permission FOREIGN KEY (permission_id) REFERENCES permissions(id)
);